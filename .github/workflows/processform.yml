name: Process input form

on:
  workflow_dispatch:
    inputs:
      issue:
        description: Number of issue to use
        required: true
        type: string

jobs:
  process:
    name: Process an input form
    runs-on: ubuntu-22.04

    steps:
      - name: Fetch form Markdown content
        id: fetch
        env:
          issue: ${{ inputs.issue }}
        run: |
          markdown=$(gh issue view "$issue" --json body --jq '.body')

          echo "markdown=$markdown" >> "$GITHUB_OUTPUT"

      - name: Convert to JSON
        uses: bewuethr/md2json-action@1-create-md2json-action
        with:
          input: ${{ steps.fetch.outputs.markdown }}
